# define a GCP VM agent to support container management (by default agent doesn't support)
agents:
  provider: "gcp"
  machineType: "n1-standard-4"

steps:
  - label: ":hammer: CI setup and tests run on :docker:"
    command:
      # TODO: change to logstash-plugins org repo, now using personal repo to test
      - ".ci/docker-setup.sh && ci/docker-run.sh"
    plugins:
      - docker-compose#v4.10.1:
          run: app
    env:
      ELASTIC_STACK_VERSION: "8.6.2" # TODO we need to dynamically inject the version